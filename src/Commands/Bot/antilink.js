const a0_0x16e926=a0_0x1309;(function(_0x4112f9,_0x793aab){const _0x13c244=a0_0x1309,_0x1dee07=_0x4112f9();while(!![]){try{const _0xf8f134=parseInt(_0x13c244(0x160))/0x1+parseInt(_0x13c244(0x195))/0x2*(-parseInt(_0x13c244(0x159))/0x3)+parseInt(_0x13c244(0x19a))/0x4*(parseInt(_0x13c244(0x15d))/0x5)+-parseInt(_0x13c244(0x18f))/0x6*(parseInt(_0x13c244(0x194))/0x7)+-parseInt(_0x13c244(0x1ab))/0x8+parseInt(_0x13c244(0x1b4))/0x9+parseInt(_0x13c244(0x1c5))/0xa*(parseInt(_0x13c244(0x197))/0xb);if(_0xf8f134===_0x793aab)break;else _0x1dee07['push'](_0x1dee07['shift']());}catch(_0x1aec27){_0x1dee07['push'](_0x1dee07['shift']());}}}(a0_0x99a7,0xb0aa6));const fs=require('fs')['promises'],path=require(a0_0x16e926(0x149)),chokidar=require(a0_0x16e926(0x171)),emojis={'success':'✅','error':'❌','adminOnly':a0_0x16e926(0x1c3),'groupOnly':'👥','link':'🔗'},configPath=path[a0_0x16e926(0x18a)](__dirname,'..','..',a0_0x16e926(0x166),a0_0x16e926(0x1b6));function a0_0x1309(_0xad9f0d,_0x4c3f6e){const _0x99a721=a0_0x99a7();return a0_0x1309=function(_0x1309df,_0x5f5a56){_0x1309df=_0x1309df-0x147;let _0x44724a=_0x99a721[_0x1309df];return _0x44724a;},a0_0x1309(_0xad9f0d,_0x4c3f6e);}let messageListener=null,groupConfigs=new Map(),watcher=null;const processedMessages=new Set();setInterval(()=>{const _0x310a9a=a0_0x16e926;processedMessages[_0x310a9a(0x193)]();},0x5*0x3c*0x3e8);function a0_0x99a7(){const _0x31d105=['Loaded\x20antilink\x20configs:','join','set','No\x20links\x20detected','Config\x20file\x20updated:','readFile','3450UYSGWB','_*Antilink\x20Disabled!*_','adminOnly','source','clear','14427bewLrJ','3236hAZWAD','parse','24277ZEGcAb','status','test','1328YTrCGy','type','from','has','antilink\x20kick_\x0a\x20_','extendedTextMessage','handleAction','warningLocks','participants','antilink\x20off_','sendMessage','antilink','_*Antilink\x20Status*_\x20','_*For\x20group\x20admins!*_','*_\x0a\x0a\x20@','get','Has\x20active\x20groups:','10952048lCLmnl','maxWarnings','videoMessage','_*Status:*_\x20','_Disabled_','_*For\x20groups\x20only!*_.','_Enabled_','reply','Manage\x20antilink\x20feature\x20in\x20a\x20group\x20(warn/kick/delete/status/off)','7118118GCFQvs','delete','antilink_config.json','Error\x20kicking\x20user:','writeFile','groupParticipantsUpdate','Message\x20deleted\x20successfully','startListening','warn','\x0a\x20_Max\x20Warnings:_\x20','code',',\x20*_Links\x20Are\x20Not\x20allowed!_*','dirname','off','\x0a\x0a*Active\x20Warnings:*','👮‍♂️','editedMessage','10210uuZBub','key','ENOENT','action','flags','enabled','conversation','path','react','imageMessage','participant','\x20has\x20been\x20kicked\x20for\x20sending\x20links.','Testing\x20','change','admin','Error\x20kicking\x20user\x20after\x20warnings:','groupOnly','superadmin','success','\x20pattern:','@g.us','antilink\x20warn\x203_\x0a\x20_','_*Antilink\x20enabled!*_\x0a\x20_Warncount:_\x20','2370HScCZI','Skipping\x20already\x20processed\x20message:','remove','\x0a•\x20@','15190nEroGo','\x20pattern','Error\x20initializing\x20antilink:','503058EujTyJ','kick','stringify','groupMetadata','Checking\x20text\x20for\x20links:','message','Database','Error\x20updating\x20config:','entries','Empty\x20text\x20provided\x20to\x20containsLink','exports','antilink\x20status_\x0a\x20_','\x20has\x20been\x20kicked\x20for\x20exceeding\x20maximum\x20warnings.','remoteJid','Admin','split','fromMe','chokidar','log','values','warnings','close','some','watch','for\x20group:','updateConfig','Error\x20reading\x20antilink\x20status.\x20Please\x20try\x20again.','protocolMessage','messages.upsert','stopListening','length','utf8','*Usage:*\x0a\x0a\x20_','caption',',*\x0a\x20_*Links\x20Are\x20Not\x20Allowed!!*_','User\x20kicked\x20successfully','error','Error\x20deleting\x20message:','antilink\x20delete_\x0a\x20_','filter','text'];a0_0x99a7=function(){return _0x31d105;};return a0_0x99a7();}const pref='.',linkPatterns={'url':/(?:https?:\/\/)?(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)/gi,'inviteLink':/chat\.whatsapp\.com\/(?:invite\/)?([a-zA-Z0-9]){20,24}/i,'shortLink':/(?:bit\.ly|tinyurl\.com|is\.gd|t\.co|tiny\.cc)\/[a-zA-Z0-9]+/gi,'ipAddress':/(?:https?:\/\/)?(?:[0-9]{1,3}\.){3}[0-9]{1,3}(?::[0-9]{1,5})?(?:\/[^\s]*)*/gi},containsLink=_0x2af9c7=>{const _0x284776=a0_0x16e926;if(!_0x2af9c7)return console[_0x284776(0x172)](_0x284776(0x169)),![];console[_0x284776(0x172)](_0x284776(0x164),_0x2af9c7);try{for(const [_0x46f93f,_0x48c563]of Object['entries'](linkPatterns)){const _0x1fa6f1=new RegExp(_0x48c563[_0x284776(0x192)],_0x48c563[_0x284776(0x1c9)]),_0x510f85=_0x1fa6f1[_0x284776(0x199)](_0x2af9c7);console['log'](_0x284776(0x14e)+_0x46f93f+_0x284776(0x155),_0x510f85);if(_0x510f85)return console[_0x284776(0x172)]('Link\x20detected\x20with\x20'+_0x46f93f+_0x284776(0x15e)),!![];}return console[_0x284776(0x172)](_0x284776(0x18c)),![];}catch(_0x573149){return console[_0x284776(0x184)]('Error\x20in\x20link\x20detection:',_0x573149),![];}};function setupConfigWatcher(){const _0x1c1c99=a0_0x16e926;watcher&&watcher[_0x1c1c99(0x175)](),watcher=chokidar[_0x1c1c99(0x177)](configPath,{'persistent':!![],'ignoreInitial':!![]}),watcher['on'](_0x1c1c99(0x14f),async()=>{const _0x44c240=_0x1c1c99;try{const _0x404309=await fs[_0x44c240(0x18e)](configPath,_0x44c240(0x17f)),_0xe8831d=JSON[_0x44c240(0x196)](_0x404309);groupConfigs=new Map(Object[_0x44c240(0x168)](_0xe8831d)),console[_0x44c240(0x172)](_0x44c240(0x18d),_0xe8831d);}catch(_0x585108){console['error']('Error\x20reading\x20updated\x20config:',_0x585108);}});}module[a0_0x16e926(0x16a)]={'usage':[a0_0x16e926(0x1a5)],'desc':a0_0x16e926(0x1b3),'commandType':a0_0x16e926(0x16e),'isGroupOnly':![],'isAdminOnly':![],'isPrivateOnly':![],async 'execute'(_0x504e6e,_0x5759a7,_0xf6236f,_0x33bba8){const _0x2dbdda=a0_0x16e926,_0x154469=_0x5759a7[_0x2dbdda(0x1c6)][_0x2dbdda(0x16d)]['endsWith'](_0x2dbdda(0x156)),_0x3e61d3=_0x5759a7[_0x2dbdda(0x1c6)][_0x2dbdda(0x16d)];if(!_0x154469)return await _0x33bba8[_0x2dbdda(0x14a)](emojis[_0x2dbdda(0x152)]),_0x33bba8['reply'](_0x2dbdda(0x1b0));const _0x233aff=await _0x504e6e[_0x2dbdda(0x163)](_0x3e61d3),_0x53e29d=_0x5759a7['key'][_0x2dbdda(0x14c)]||_0x5759a7[_0x2dbdda(0x1c6)][_0x2dbdda(0x16d)],_0x55a4c8=_0x233aff[_0x2dbdda(0x1a2)][_0x2dbdda(0x176)](_0x1f2080=>_0x1f2080['id']===_0x53e29d&&(_0x1f2080[_0x2dbdda(0x150)]===_0x2dbdda(0x150)||_0x1f2080[_0x2dbdda(0x150)]===_0x2dbdda(0x153)));if(!_0x55a4c8)return await _0x33bba8[_0x2dbdda(0x14a)](emojis[_0x2dbdda(0x191)]),_0x33bba8[_0x2dbdda(0x1b2)](_0x2dbdda(0x1a7));const _0x10d0c7=_0xf6236f[0x0]?.['toLowerCase']();let _0x343f90=groupConfigs[_0x2dbdda(0x1a9)](_0x3e61d3)||{'enabled':![],'action':_0x2dbdda(0x1b5),'maxWarnings':0x3,'warnings':{}};this[_0x2dbdda(0x17d)](_0x504e6e);switch(_0x10d0c7){case'kick':case _0x2dbdda(0x1bc):case _0x2dbdda(0x1b5):_0x343f90[_0x2dbdda(0x147)]=!![],_0x343f90[_0x2dbdda(0x1c8)]=_0x10d0c7;_0x10d0c7===_0x2dbdda(0x1bc)&&(_0x343f90['maxWarnings']=parseInt(_0xf6236f[0x1])||0x3,_0x343f90['warnings']=_0x343f90[_0x2dbdda(0x174)]||{});await this[_0x2dbdda(0x179)](_0x3e61d3,_0x343f90),groupConfigs[_0x2dbdda(0x18b)](_0x3e61d3,_0x343f90),this['startListening'](_0x504e6e),await _0x33bba8[_0x2dbdda(0x14a)](emojis[_0x2dbdda(0x154)]);const _0x2d1642=_0x10d0c7===_0x2dbdda(0x1bc)?_0x2dbdda(0x158)+_0x343f90[_0x2dbdda(0x1ac)]:'_*Antilink\x20enabled!*_\x0a\x20_Action:_\x20'+_0x10d0c7+'\x20.';return _0x33bba8[_0x2dbdda(0x1b2)](_0x2d1642);case'off':_0x343f90['enabled']=![],await this[_0x2dbdda(0x179)](_0x3e61d3,_0x343f90);const _0x43cbbc=Array['from'](groupConfigs[_0x2dbdda(0x173)]())[_0x2dbdda(0x176)](_0x2fba01=>_0x2fba01['enabled']);!_0x43cbbc?this['stopListening'](_0x504e6e):this[_0x2dbdda(0x1bb)](_0x504e6e);await _0x33bba8['react'](emojis['success']);return _0x33bba8[_0x2dbdda(0x1b2)](_0x2dbdda(0x190));case _0x2dbdda(0x198):try{const _0x690774=await fs[_0x2dbdda(0x18e)](configPath,_0x2dbdda(0x17f)),_0x2b2548=JSON['parse'](_0x690774);groupConfigs=new Map(Object[_0x2dbdda(0x168)](_0x2b2548));const _0x30444e=_0x2b2548[_0x3e61d3]||{'enabled':![],'action':_0x2dbdda(0x1b5),'maxWarnings':0x3,'warnings':{}},_0x12fecd=_0x30444e[_0x2dbdda(0x147)]?emojis[_0x2dbdda(0x154)]:emojis[_0x2dbdda(0x184)];let _0xfa5bdc=_0x2dbdda(0x1a6)+_0x12fecd+'\x0a\x0a'+(_0x2dbdda(0x1ae)+(_0x30444e[_0x2dbdda(0x147)]?_0x2dbdda(0x1b1):_0x2dbdda(0x1af))+'\x0a')+('_*Action:*_\x20'+_0x30444e[_0x2dbdda(0x1c8)]);if(_0x30444e[_0x2dbdda(0x1c8)]===_0x2dbdda(0x1bc)){_0xfa5bdc+=_0x2dbdda(0x1bd)+_0x30444e[_0x2dbdda(0x1ac)];const _0x2b666b=Object[_0x2dbdda(0x168)](_0x30444e['warnings']||{})[_0x2dbdda(0x187)](([_0x467690,_0x15671d])=>_0x15671d>0x0);if(_0x2b666b[_0x2dbdda(0x17e)]>0x0){_0xfa5bdc+=_0x2dbdda(0x1c2);for(const [_0x2e093f,_0x2df6c6]of _0x2b666b){_0xfa5bdc+=_0x2dbdda(0x15c)+_0x2e093f['split']('@')[0x0]+':\x20'+_0x2df6c6+'/'+_0x30444e[_0x2dbdda(0x1ac)];}}}return _0x33bba8[_0x2dbdda(0x1b2)](_0xfa5bdc);}catch(_0x550dcf){return console[_0x2dbdda(0x184)]('Error\x20reading\x20config\x20for\x20status:',_0x550dcf),_0x33bba8['reply'](_0x2dbdda(0x17a));}default:return _0x33bba8[_0x2dbdda(0x1b2)](_0x2dbdda(0x180)+pref+_0x2dbdda(0x19e)+pref+_0x2dbdda(0x157)+pref+_0x2dbdda(0x186)+pref+_0x2dbdda(0x16b)+pref+_0x2dbdda(0x1a3));}},async 'updateConfig'(_0x46bae6,_0x56c633){const _0x458cda=a0_0x16e926;try{let _0x5f46ea={};try{const _0x37c70f=await fs[_0x458cda(0x18e)](configPath,_0x458cda(0x17f));_0x5f46ea=JSON['parse'](_0x37c70f);}catch(_0x594bcc){console['log']('No\x20existing\x20config\x20file,\x20creating\x20new\x20one');}_0x5f46ea[_0x46bae6]=_0x56c633,await fs[_0x458cda(0x1b8)](configPath,JSON[_0x458cda(0x162)](_0x5f46ea,null,0x2),_0x458cda(0x17f)),console[_0x458cda(0x172)]('Updated\x20config\x20for\x20group:',_0x46bae6,_0x56c633),groupConfigs[_0x458cda(0x18b)](_0x46bae6,_0x56c633);}catch(_0x2226fa){console[_0x458cda(0x184)](_0x458cda(0x167),_0x2226fa);throw _0x2226fa;}},'startListening'(_0x2a6319){const _0xaf7252=a0_0x16e926;this[_0xaf7252(0x17d)](_0x2a6319),messageListener=async({messages:_0x3ad764})=>{const _0x596acf=_0xaf7252;for(const _0x6b7023 of _0x3ad764){try{if(_0x6b7023[_0x596acf(0x1c6)][_0x596acf(0x170)]||!_0x6b7023[_0x596acf(0x165)])continue;if(_0x6b7023['message'][_0x596acf(0x17b)])continue;const _0x220a13=_0x6b7023[_0x596acf(0x1c6)]['remoteJid']+':'+_0x6b7023[_0x596acf(0x1c6)]['id'];if(processedMessages[_0x596acf(0x19d)](_0x220a13)){console[_0x596acf(0x172)](_0x596acf(0x15a),_0x220a13);continue;}processedMessages['add'](_0x220a13);const _0x42b26c=_0x6b7023[_0x596acf(0x1c6)][_0x596acf(0x16d)];if(!_0x42b26c?.['endsWith'](_0x596acf(0x156)))continue;const _0x2018b2=groupConfigs[_0x596acf(0x1a9)](_0x42b26c);if(!_0x2018b2?.[_0x596acf(0x147)])continue;const _0x5201cd=_0x6b7023[_0x596acf(0x1c6)][_0x596acf(0x14c)]||_0x6b7023[_0x596acf(0x1c6)][_0x596acf(0x16d)],_0x42990f=await _0x2a6319[_0x596acf(0x163)](_0x42b26c),_0x2cc248=_0x42990f[_0x596acf(0x1a2)]['some'](_0x1962c1=>_0x1962c1['id']===_0x5201cd&&(_0x1962c1[_0x596acf(0x150)]===_0x596acf(0x150)||_0x1962c1[_0x596acf(0x150)]==='superadmin'));if(_0x2cc248)continue;let _0x39486c='';if(_0x6b7023['message'][_0x596acf(0x148)])_0x39486c=_0x6b7023[_0x596acf(0x165)]['conversation'];else{if(_0x6b7023[_0x596acf(0x165)][_0x596acf(0x19f)])_0x39486c=_0x6b7023[_0x596acf(0x165)]['extendedTextMessage'][_0x596acf(0x188)];else{if(_0x6b7023[_0x596acf(0x165)]['protocolMessage']?.[_0x596acf(0x19b)]===0xe){const _0x1d1918=_0x6b7023[_0x596acf(0x165)][_0x596acf(0x17b)][_0x596acf(0x1c4)];if(_0x1d1918[_0x596acf(0x148)])_0x39486c=_0x1d1918[_0x596acf(0x148)];else{if(_0x1d1918[_0x596acf(0x19f)])_0x39486c=_0x1d1918['extendedTextMessage'][_0x596acf(0x188)];else{if(_0x1d1918[_0x596acf(0x14b)])_0x39486c=_0x1d1918['imageMessage']['caption']||'';else _0x1d1918[_0x596acf(0x1ad)]&&(_0x39486c=_0x1d1918['videoMessage'][_0x596acf(0x181)]||'');}}}else{if(_0x6b7023[_0x596acf(0x165)][_0x596acf(0x14b)])_0x39486c=_0x6b7023[_0x596acf(0x165)][_0x596acf(0x14b)][_0x596acf(0x181)]||'';else _0x6b7023[_0x596acf(0x165)][_0x596acf(0x1ad)]&&(_0x39486c=_0x6b7023[_0x596acf(0x165)][_0x596acf(0x1ad)][_0x596acf(0x181)]||'');}}}if(_0x39486c&&containsLink(_0x39486c)){const _0x2d000f=_0x42b26c+':'+_0x5201cd;if(!global[_0x596acf(0x1a1)])global['warningLocks']=new Set();if(global[_0x596acf(0x1a1)][_0x596acf(0x19d)](_0x2d000f))continue;global['warningLocks']['add'](_0x2d000f);try{await this[_0x596acf(0x1a0)](_0x2a6319,_0x6b7023,_0x42b26c,_0x5201cd,_0x2018b2);}finally{global['warningLocks'][_0x596acf(0x1b5)](_0x2d000f);}}}catch(_0x4f1c5d){console['error']('Error\x20in\x20message\x20listener:',_0x4f1c5d);}}},_0x2a6319['ev']['on'](_0xaf7252(0x17c),messageListener),console[_0xaf7252(0x172)]('Started\x20new\x20antilink\x20listener');},'stopListening'(_0x53fe86){const _0x70e42=a0_0x16e926;messageListener&&(_0x53fe86['ev'][_0x70e42(0x1c1)]('messages.upsert',messageListener),messageListener=null,console['log']('Stopped\x20existing\x20antilink\x20listener'));},async 'handleAction'(_0x4d7119,_0x495f80,_0x3cd6fb,_0x335945,_0x144828){const _0x38cdae=a0_0x16e926;console['log']('Handling\x20action:',_0x144828[_0x38cdae(0x1c8)],_0x38cdae(0x178),_0x3cd6fb);try{await _0x4d7119[_0x38cdae(0x1a4)](_0x3cd6fb,{'delete':_0x495f80['key']}),console[_0x38cdae(0x172)](_0x38cdae(0x1ba));}catch(_0x2de839){console[_0x38cdae(0x184)](_0x38cdae(0x185),_0x2de839);}switch(_0x144828[_0x38cdae(0x1c8)]){case _0x38cdae(0x161):try{await _0x4d7119[_0x38cdae(0x1b9)](_0x3cd6fb,[_0x335945],_0x38cdae(0x15b)),await _0x4d7119[_0x38cdae(0x1a4)](_0x3cd6fb,{'text':'@'+_0x335945['split']('@')[0x0]+_0x38cdae(0x14d),'mentions':[_0x335945]}),console[_0x38cdae(0x172)](_0x38cdae(0x183));}catch(_0x19d6c1){console['error'](_0x38cdae(0x1b7),_0x19d6c1);}break;case _0x38cdae(0x1bc):_0x144828[_0x38cdae(0x174)][_0x335945]=(_0x144828['warnings'][_0x335945]||0x0)+0x1,await this['updateConfig'](_0x3cd6fb,_0x144828);if(_0x144828[_0x38cdae(0x174)][_0x335945]>=_0x144828[_0x38cdae(0x1ac)])try{await _0x4d7119[_0x38cdae(0x1b9)](_0x3cd6fb,[_0x335945],_0x38cdae(0x15b)),await _0x4d7119[_0x38cdae(0x1a4)](_0x3cd6fb,{'text':'@'+_0x335945[_0x38cdae(0x16f)]('@')[0x0]+_0x38cdae(0x16c),'mentions':[_0x335945]}),_0x144828[_0x38cdae(0x174)][_0x335945]=0x0,await this[_0x38cdae(0x179)](_0x3cd6fb,_0x144828);}catch(_0xe3b0c0){console[_0x38cdae(0x184)](_0x38cdae(0x151),_0xe3b0c0);}else await _0x4d7119['sendMessage'](_0x3cd6fb,{'text':'_*Warning!'+_0x144828['warnings'][_0x335945]+'/'+_0x144828[_0x38cdae(0x1ac)]+_0x38cdae(0x1a8)+_0x335945[_0x38cdae(0x16f)]('@')[0x0]+_0x38cdae(0x1bf),'mentions':[_0x335945]});break;case _0x38cdae(0x1b5):await _0x4d7119['sendMessage'](_0x3cd6fb,{'text':'*@'+_0x335945[_0x38cdae(0x16f)]('@')[0x0]+_0x38cdae(0x182),'mentions':[_0x335945]});break;}},async 'init'(_0x215a87){const _0x5443a9=a0_0x16e926;try{const _0x1424d5=path[_0x5443a9(0x1c0)](configPath);await fs['mkdir'](_0x1424d5,{'recursive':!![]});try{const _0x153636=await fs[_0x5443a9(0x18e)](configPath,'utf8'),_0x4d3b55=JSON[_0x5443a9(0x196)](_0x153636);groupConfigs=new Map(Object[_0x5443a9(0x168)](_0x4d3b55)),console['log'](_0x5443a9(0x189),_0x4d3b55),console[_0x5443a9(0x172)]('GroupConfigs\x20Map\x20size:',groupConfigs['size']),setupConfigWatcher();const _0x453693=Array[_0x5443a9(0x19c)](groupConfigs[_0x5443a9(0x173)]())[_0x5443a9(0x176)](_0x5db361=>_0x5db361[_0x5443a9(0x147)]);console['log'](_0x5443a9(0x1aa),_0x453693),_0x453693&&this[_0x5443a9(0x1bb)](_0x215a87);}catch(_0xc4deef){if(_0xc4deef[_0x5443a9(0x1be)]===_0x5443a9(0x1c7))await fs[_0x5443a9(0x1b8)](configPath,'{}',_0x5443a9(0x17f)),groupConfigs=new Map();else throw _0xc4deef;}}catch(_0xdf0529){console[_0x5443a9(0x184)](_0x5443a9(0x15f),_0xdf0529);throw _0xdf0529;}}};